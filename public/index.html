<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ù§Ô∏è Like Duel - O'zaro Match va Do'stlar Tizimi</title>
    
    <!-- CDN kutubxonalari -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- ASOSIY KONTENT -->
        <div class="main-content">
            <!-- HEADER -->
            <div class="app-header">
                <div class="header-title">
                    <i class="fas fa-heart"></i>
                    <span>Like Duel</span>
                </div>
                <div class="header-stats">
                    <div class="stat-item" id="coinsStat">
                        <i class="fas fa-coins"></i>
                        <span id="coinsCount">100</span>
                    </div>
                    <div class="stat-item" id="levelStat">
                        <i class="fas fa-star"></i>
                        <span id="levelCount">1</span>
                    </div>
                </div>
            </div>

            <!-- ASOSIY CONTENT AREA -->
            <div id="contentArea">
                <!-- DUEL SCREEN (ASOSIY EKRAN) -->
                <div class="screen active" id="welcomeScreen">
                    <div class="profile-card">
                        <img src="" alt="Siz" class="profile-avatar" id="myAvatar">
                        <div class="profile-name" id="myName">Foydalanuvchi</div>
                        <div class="profile-username" id="myUsername">@username</div>

                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value" id="myMatches">0</div>
                                <div class="stat-label">Matchlar</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="mutualMatchesCount">0</div>
                                <div class="stat-label">O'zaro Match</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="myLikes">0</div>
                                <div class="stat-label">Likelar</div>
                            </div>
                        </div>

                        <!-- Gender Filter -->
                        <div class="gender-filter-container" id="genderFilterContainer">
                            <div class="gender-filter-options">
                                <div class="gender-filter-option" data-filter="male">
                                    <div class="gender-filter-icon male">
                                        <i class="fas fa-mars"></i>
                                    </div>
                                    <div class="gender-filter-info">
                                        <div class="gender-filter-name">Faqat Erkaklar</div>
                                        <div class="gender-filter-description">Ayollar bilan duel</div>
                                    </div>
                                </div>
                                
                                <div class="gender-filter-option" data-filter="female">
                                    <div class="gender-filter-icon female">
                                        <i class="fas fa-venus"></i>
                                    </div>
                                    <div class="gender-filter-info">
                                        <div class="gender-filter-name">Faqat Ayollar</div>
                                        <div class="gender-filter-description">Erkaklar bilan duel</div>
                                    </div>
                                </div>
                                
                                <div class="gender-filter-option active" data-filter="not_specified">
                                    <div class="gender-filter-icon all">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="gender-filter-info">
                                        <div class="gender-filter-name">Hammasi</div>
                                        <div class="gender-filter-description">Hamma bilan duel</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ASOSIY TUGMALAR -->
                        <div class="main-buttons">
                            <button id="connectBtn" class="main-btn connect-btn">
                                <i class="fas fa-plug"></i> Serverga Ulanish
                            </button>
                            <button id="enterQueueBtn" class="main-btn queue-btn" disabled>
                                <i class="fas fa-gamepad"></i> Navbatga Kirish
                            </button>
                        </div>

                        <!-- QO'SHIMCHA TUGMALAR -->
                        <div class="secondary-buttons">
                            <button class="secondary-btn" onclick="showGenderModal(true)">
                                <i class="fas fa-venus-mars"></i> Jins
                            </button>
                            <button class="secondary-btn" onclick="showProfileModal()">
                                <i class="fas fa-edit"></i> Profil
                            </button>
                            <button class="secondary-btn" onclick="showStats()">
                                <i class="fas fa-chart-bar"></i> Statistika
                            </button>
                        </div>

                        <!-- BOSHQA FUNKSIYALAR -->
                        <div class="quick-actions">
                            <button class="quick-btn" onclick="switchScreen('friends')">
                                <i class="fas fa-users"></i> Do'stlar
                            </button>
                            <button class="quick-btn" onclick="switchScreen('shop')">
                                <i class="fas fa-shopping-cart"></i> Do'kon
                            </button>
                            <button class="quick-btn" onclick="switchScreen('leaderboard')">
                                <i class="fas fa-trophy"></i> Liderlar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- QUEUE SCREEN -->
                <div class="screen" id="queueScreen">
                    <div class="queue-container">
                        <div class="loader"></div>
                        <div class="waiting-info">üîÑ Navbatda kutish...</div>
                        
                        <div class="queue-stats">
                            <div class="queue-stat">
                                <div class="queue-stat-value" id="waitingCount">0</div>
                                <div class="queue-stat-label">Navbatdagi odam</div>
                            </div>
                            <div class="queue-stat">
                                <div class="queue-stat-value" id="position">-</div>
                                <div class="queue-stat-label">Sizning o'rningiz</div>
                            </div>
                        </div>

                        <div class="queue-status" id="queueStatus">
                            Serverga ulanmoqda...
                        </div>

                        <button id="leaveQueueBtn" class="main-btn cancel-btn">
                            <i class="fas fa-sign-out-alt"></i> Navbatdan Chiqish
                        </button>
                    </div>
                </div>

                <!-- DUEL SCREEN -->
                <div class="screen" id="duelScreen">
                    <div class="duel-container">
                        <img src="" alt="Raqib" class="opponent-avatar" id="opponentAvatar">
                        
                        <div class="opponent-info">
                            <div class="opponent-name" id="opponentName">Raqib</div>
                            <div class="opponent-username" id="opponentUsername">@username</div>
                            
                            <div class="opponent-stats">
                                <div class="opponent-stat">
                                    <i class="fas fa-trophy"></i>
                                    <span id="opponentRating">1500</span>
                                </div>
                                <div class="opponent-stat">
                                    <i class="fas fa-heart"></i>
                                    <span id="opponentMatches">0</span>
                                </div>
                                <div class="opponent-stat">
                                    <i class="fas fa-level-up-alt"></i>
                                    <span id="opponentLevel">1</span>
                                </div>
                            </div>
                        </div>

                        <div class="super-like-info">
                            <i class="fas fa-gem"></i>
                            <span>Kunlik SUPER LIKE:</span>
                            <span class="super-like-count" id="superLikeCount">3</span>
                        </div>

                        <div class="timer-section">
                            <div class="timer-circle">
                                <div class="timer" id="timer">20</div>
                                <div class="timer-label">soniya</div>
                            </div>
                        </div>

                        <div class="vote-section">
                            <div class="vote-buttons">
                                <button class="vote-btn skip-btn" id="skipBtn">
                                    <div class="vote-icon">‚úñ</div>
                                    <div class="vote-label">O'tkazish</div>
                                </button>
                                
                                <button class="vote-btn like-btn" id="likeBtn">
                                    <div class="vote-icon">‚ù§Ô∏è</div>
                                    <div class="vote-label">Like</div>
                                </button>
                                
                                <button class="vote-btn super-like-btn" id="superLikeBtn">
                                    <div class="vote-icon">üíñ</div>
                                    <div class="vote-label">Super Like</div>
                                </button>
                            </div>
                        </div>

                        <div class="duel-status" id="duelStatus">
                            Ovoz bering: ‚ù§Ô∏è yoki üíñ yoki ‚úñ
                        </div>
                    </div>
                </div>

                <!-- MATCH SCREEN -->
                <div class="screen" id="matchScreen">
                    <div class="match-container">
                        <div class="match-title">üéâ MATCH!</div>
                        
                        <div class="match-partner">
                            <img src="" alt="Partner" class="match-avatar" id="partnerAvatar">
                            <div class="match-partner-name" id="partnerName">Foydalanuvchi</div>
                            <div class="match-partner-username" id="partnerUsername">@username</div>
                        </div>

                        <div class="match-message" id="matchMessage">
                            O'zaro SUPER LIKE bo'ldi!
                        </div>

                        <div class="match-rewards">
                            <div class="reward">
                                <i class="fas fa-coins"></i>
                                <span>+<span id="rewardCoins">50</span> coin</span>
                            </div>
                            <div class="reward">
                                <i class="fas fa-star"></i>
                                <span>+<span id="rewardXP">30</span> XP</span>
                            </div>
                            <div class="reward">
                                <i class="fas fa-users"></i>
                                <span>DO'ST BO'LDINGIZ!</span>
                            </div>
                        </div>

                        <div class="match-actions">
                            <button class="match-action-btn chat-btn" onclick="openChat()">
                                <i class="fas fa-comment"></i> Chat
                            </button>
                            <button class="match-action-btn next-btn" onclick="continuePlaying()">
                                <i class="fas fa-play"></i> Davom etish
                            </button>
                            <button class="match-action-btn menu-btn" onclick="returnToMenu()">
                                <i class="fas fa-home"></i> Menyu
                            </button>
                        </div>
                    </div>
                </div>

                <!-- FRIENDS SCREEN -->
                <div class="screen" id="friendsScreen">
                    <div class="friends-container">
                        <div class="friends-header">
                            <h2><i class="fas fa-users"></i> Do'stlarim</h2>
                            <button class="refresh-btn" onclick="loadFriends()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        
                        <div class="friends-stats">
                            <div class="friend-stat">
                                <span class="stat-value" id="friendsCount">0</span>
                                <span class="stat-label">Do'stlar</span>
                            </div>
                            <div class="friend-stat">
                                <span class="stat-value" id="onlineFriendsCount">0</span>
                                <span class="stat-label">Onlayn</span>
                            </div>
                        </div>

                        <div class="friends-list" id="friendsList">
                            <!-- Do'stlar ro'yxati bu yerda ko'rinadi -->
                        </div>

                        <div class="no-friends" id="noFriends">
                            <div class="no-friends-icon">üòî</div>
                            <div class="no-friends-title">Hali do'stlaringiz yo'q</div>
                            <div class="no-friends-text">
                                O'zaro like bergan foydalanuvchilar bu yerda ko'rinadi
                            </div>
                            <button class="main-btn" onclick="switchScreen('welcome')">
                                <i class="fas fa-gamepad"></i> Duel O'ynash
                            </button>
                        </div>
                    </div>
                </div>

                <!-- SHOP SCREEN -->
                <div class="screen" id="shopScreen">
                    <div class="shop-container">
                        <div class="shop-header">
                            <h2><i class="fas fa-shopping-cart"></i> Do'kon</h2>
                            <div class="shop-balance">
                                <i class="fas fa-coins"></i>
                                <span id="shopCoinsCount">100</span>
                            </div>
                        </div>

                        <div class="shop-items" id="shopItems">
                            <!-- Mahsulotlar bu yerda ko'rinadi -->
                        </div>
                    </div>
                </div>

                <!-- LEADERBOARD SCREEN -->
                <div class="screen" id="leaderboardScreen">
                    <div class="leaderboard-container">
                        <div class="leaderboard-header">
                            <h2><i class="fas fa-trophy"></i> Liderlar Doskasi</h2>
                        </div>

                        <div class="leaderboard-tabs">
                            <button class="leaderboard-tab active" data-type="rating">Reyting</button>
                            <button class="leaderboard-tab" data-type="matches">Matchlar</button>
                            <button class="leaderboard-tab" data-type="friends">Do'stlar</button>
                        </div>

                        <div class="leaderboard-list" id="leaderboardList">
                            <!-- Liderlar ro'yxati bu yerda ko'rinadi -->
                        </div>

                        <div class="leaderboard-update">
                            Yangilangan: <span id="leaderboardUpdated">hozir</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- NAVIGATION BAR (PASTDA) -->
            <div class="nav-bar">
                <button class="nav-btn active" data-screen="welcome">
                    <i class="fas fa-gamepad"></i>
                    <span>Duel</span>
                </button>
                <button class="nav-btn" data-screen="profile">
                    <i class="fas fa-user"></i>
                    <span>Profil</span>
                </button>
                <button class="nav-btn" data-screen="friends">
                    <i class="fas fa-users"></i>
                    <span>Do'stlar</span>
                </button>
                <button class="nav-btn" data-screen="shop">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Do'kon</span>
                </button>
                <button class="nav-btn" data-screen="leaderboard">
                    <i class="fas fa-trophy"></i>
                    <span>Liderlar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ==================== MODALLAR ==================== -->
    
    <!-- Gender tanlash modali -->
    <div class="modal-overlay" id="genderModal">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-venus-mars"></i> Jinsni Tanlang</h3>
                <button class="modal-close" onclick="hideGenderModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="gender-selection">
                    <div class="gender-option" onclick="selectGender('male')">
                        <div class="gender-icon male">
                            <i class="fas fa-mars"></i>
                        </div>
                        <div class="gender-info">
                            <div class="gender-title">Erkak</div>
                            <div class="gender-desc">Faqat ayollar bilan duel</div>
                        </div>
                    </div>
                    
                    <div class="gender-option" onclick="selectGender('female')">
                        <div class="gender-icon female">
                            <i class="fas fa-venus"></i>
                        </div>
                        <div class="gender-info">
                            <div class="gender-title">Ayol</div>
                            <div class="gender-desc">Faqat erkaklar bilan duel</div>
                        </div>
                    </div>
                    
                    <div class="gender-option" onclick="selectGender('not_specified')">
                        <div class="gender-icon all">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="gender-info">
                            <div class="gender-title">Hammasi</div>
                            <div class="gender-desc">Har qanday jins bilan duel</div>
                        </div>
                    </div>
                </div>
                
                <div class="gender-note">
                    <i class="fas fa-info-circle"></i>
                    Jins tanlash duel qilish uchun majburiy. Keyinchalik profil orqali o'zgartirishingiz mumkin.
                </div>
            </div>
        </div>
    </div>

    <!-- Profil tahrirlash modali -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Profilni Tahrirlash</h3>
                <button class="modal-close" onclick="hideProfileModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label>Bio</label>
                    <textarea id="editBio" placeholder="O'zingiz haqingizda yozing..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Jins</label>
                    <select id="editGender">
                        <option value="not_specified">Ko'rsatilmaydi</option>
                        <option value="male">Erkak</option>
                        <option value="female">Ayol</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Duel Filter</label>
                    <select id="editFilter">
                        <option value="not_specified">Hamma bilan</option>
                        <option value="male">Faqat erkaklar bilan</option>
                        <option value="female">Faqat ayollar bilan</option>
                    </select>
                </div>
                
                <button class="main-btn save-btn" onclick="saveProfile()">
                    <i class="fas fa-save"></i> Saqlash
                </button>
            </div>
        </div>
    </div>

    <!-- Chat modali -->
    <div class="modal-overlay" id="chatModal">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-comment"></i> Chat</h3>
                <button class="modal-close" onclick="hideChatModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="chat-partner">
                    <img src="" alt="Partner" class="chat-avatar" id="chatPartnerAvatar">
                    <div class="chat-partner-info">
                        <div class="chat-name" id="chatPartnerName">Foydalanuvchi</div>
                        <div class="chat-username" id="chatPartnerUsername">@username</div>
                    </div>
                </div>
                
                <button class="chat-action-btn" onclick="openTelegramChat()">
                    <i class="fab fa-telegram"></i> Telegramda ochish
                </button>
                
                <div class="chat-note">
                    <i class="fas fa-info-circle"></i> Match bo'lganingiz uchun endi bir-biringiz bilan suhbatlashingiz mumkin!
                </div>
            </div>
        </div>
    </div>

    <!-- Statistika modali -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-chart-bar"></i> Statistika</h3>
                <button class="modal-close" onclick="hideStatsModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="statRating">1500</div>
                        <div class="stat-label">Reyting</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statMatches">0</div>
                        <div class="stat-label">Matchlar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statDuels">0</div>
                        <div class="stat-label">Duellar</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statWinRate">0%</div>
                        <div class="stat-label">G'alaba %</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statMutualMatches">0</div>
                        <div class="stat-label">O'zaro Match</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statFriendsCount">0</div>
                        <div class="stat-label">Do'stlar</div>
                    </div>
                </div>
                
                <div class="detailed-stats">
                    <h4>Batafsil:</h4>
                    <div class="stat-item">
                        <span>Total Like:</span>
                        <span id="detailTotalLikes">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Coin:</span>
                        <span id="detailCoins">100</span>
                    </div>
                    <div class="stat-item">
                        <span>Level:</span>
                        <span id="detailLevel">1</span>
                    </div>
                    <div class="stat-item">
                        <span>Kunlik Super Like:</span>
                        <span id="detailDailySuperLikes">3</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-title" id="notificationTitle"></div>
            <div class="notification-message" id="notificationMessage"></div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>